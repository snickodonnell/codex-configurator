<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Configurator Admin Landing</title>
    <style>
      body{font-family:Arial,sans-serif;margin:2rem;max-width:1100px}
      .cards{display:flex;gap:1rem;flex-wrap:wrap}
      .card{border:1px solid #ddd;padding:1rem;border-radius:8px;min-width:260px}
      table{width:100%;border-collapse:collapse;margin:0.5rem 0 1.5rem}
      th,td{border:1px solid #ddd;padding:.5rem;text-align:left}
      form.inline input{margin-right:.5rem}
    </style>
  </head>
  <body>
    <h1>Sales Configurator Admin Landing</h1>
    <p>Launch points and visibility for rules, design, and end-user usage.</p>
    <form method="post" action="/logout"><button type="submit">Logout</button></form>

    <section class="cards">
      <div class="card">
        <h2>Rules Engine</h2>
        <p>Manage and deploy product rule sets.</p>
        <a href="{{ rules_engine_url }}">Open Rules Engine</a>
      </div>
      <div class="card">
        <h2>Configuration Front-End Design</h2>
        <p>Design and review configurator UX enhancements.</p>
        <a href="{{ design_url }}">Open Design Front-End</a>
      </div>
      <div class="card">
        <h2>End User Front-End</h2>
        <p>Customer-facing runtime configurator interface.</p>
        <a href="{{ end_user_url }}">Open End User Front-End</a>
      </div>
    </section>

    <h2>Product Rule Sets</h2>
    <table>
      <thead><tr><th>ID</th><th>Name</th><th>Environment</th><th>Created</th></tr></thead>
      <tbody>
        {% for ruleset in rulesets %}
        <tr><td>{{ ruleset.id }}</td><td>{{ ruleset.name }}</td><td>{{ ruleset.environment }}</td><td>{{ ruleset.created_at }}</td></tr>
        {% else %}
        <tr><td colspan="4">No rulesets yet.</td></tr>
        {% endfor %}
      </tbody>
    </table>

    <h2>Front-End Enhancements</h2>
    <form class="inline" method="post" action="/enhancements">
      <input name="title" placeholder="Enhancement title" required />
      <input name="status" placeholder="planned/in-progress/done" value="planned" required />
      <input name="notes" placeholder="Notes" required />
      <button type="submit">Add</button>
    </form>
    <table>
      <thead><tr><th>ID</th><th>Title</th><th>Status</th><th>Notes</th><th>Created</th></tr></thead>
      <tbody>
        {% for enhancement in enhancements %}
        <tr><td>{{ enhancement.id }}</td><td>{{ enhancement.title }}</td><td>{{ enhancement.status }}</td><td>{{ enhancement.notes }}</td><td>{{ enhancement.created_at }}</td></tr>
        {% else %}
        <tr><td colspan="5">No enhancements yet.</td></tr>
        {% endfor %}
      </tbody>
    </table>

    <h2>Recent End-User Configurations</h2>
    <table>
      <thead><tr><th>ID</th><th>Customer</th><th>Environment</th><th>Last Updated</th></tr></thead>
      <tbody>
        {% for config in configurations %}
        <tr><td>{{ config.id }}</td><td>{{ config.customer_id }}</td><td>{{ config.environment }}</td><td>{{ config.updated_at }}</td></tr>
        {% else %}
        <tr><td colspan="4">No configurations have been evaluated yet.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </body>
</html>
